"use strict";const selectedMsg={fuagra:"Печень утки разварная с артишоками.",fish:"Головы щучьи с чесноком да свежайшая сёмгушка.",chicken:"Филе из цыплят с трюфелями в бульоне."};function init(){setHandlers(getPacks())}function getPacks(){const e=document.getElementsByClassName("kote-food");return[].slice.call(e)}function getStatus(e){let t=[];return e.forEach(function(e){let n=-1!=e.children[0].className.indexOf("_selected"),s=-1!=e.children[0].className.indexOf("_disabled");n?t.push("selected"):s?t.push("disabled"):t.push("default")}),t}function setHandlers(e){return document.getElementsByClassName("container")[0].clientWidth>1180?addClickHandlers(e):addTouchHandlers(e)}function addClickHandlers(e){let t=getStatus(e);e.forEach(function(n,s){let a="disabled"===t[s],i="default"===t[s];if(!a){let t=n.children[0];if(addHoverEvent(t),t.addEventListener("click",function(t){handler(t,e)}),i){document.getElementsByClassName("kote-food__msg-btn")[0].addEventListener("click",function(t){handler(t,e)})}}})}function handler(e,t){e.stopPropagation(),changeDesign(e,t,getStatus(t))}function changeStatus(e,t){switch(e[t]){case"default":e[t]="selected";break;case"selected":e[t]="default"}return e}function changeDesign(e,t,n){let s=e.currentTarget,a=document.getElementsByClassName("container")[0].clientWidth,i=-1!=s.className.indexOf("-btn");t.some(function(l,d){let c=i?s.parentElement.previousElementSibling:s,o=c.parentElement.getAttribute("data-id"),r=l.getAttribute("data-id"),u=-1!=c.className.indexOf("_selected");if(o===r){let s=changeStatus(n,d);if(u){c.className="kote-food__pack",c.nextElementSibling.innerHTML='Чего сидишь? Порадуй котэ, <span class="kote-food__msg-btn"><b>купи.</b></span>';let e=c.nextElementSibling.children[0];a>1180?e.addEventListener("click",function(e){handler(e,t,s)}):e.addEventListener("touchend",function(e){handler(e,t,s)})}else{switch(c.className="kote-food__pack_"+s[d],c.children[2].textContent){case"с фуа-гра":c.nextElementSibling.innerHTML=selectedMsg.fuagra;break;case"с рыбой":c.nextElementSibling.innerHTML=selectedMsg.fish;break;case"с курой":c.nextElementSibling.innerHTML=selectedMsg.chicken}}return a>1180&&(removeHoverEvent(c,u),addHoverEvent(c,e)),!0}})}function removeHoverEvent(e,t){e.removeEventListener("mouseenter",mouseIn),e.removeEventListener("mouseleave",mouseOut),e.parentElement.className="kote-food",t&&(e.children[0].textContent="Сказочное заморское яство")}function addHoverEvent(e,t){if(t)var n=-1!=t.currentTarget.className.indexOf("-btn");if(n||!t){-1!=e.parentElement.className.indexOf("hover")||(e.parentElement.className+=" hover"),e.addEventListener("mouseenter",mouseIn),e.addEventListener("mouseleave",mouseOut)}else e.addEventListener("mouseleave",function(){-1!=this.parentElement.className.indexOf("hover")||(this.parentElement.className+=" hover"),this.addEventListener("mouseenter",mouseIn),this.addEventListener("mouseleave",mouseOut)},{once:!0})}function mouseIn(){let e=-1!=this.className.indexOf("_selected"),t=this.children[0];e&&(t.textContent="Котэ не одобряет?")}function mouseOut(){let e=-1!=this.className.indexOf("_selected"),t=this.children[0];e&&(t.textContent="Сказочное заморское яство")}function addTouchHandlers(e){let t=getStatus(e);e.forEach(function(n,s){let a="disabled"===t[s],i="default"===t[s];if(!a){if(n.children[0].addEventListener("touchend",function(t){handler(t,e)}),i){document.getElementsByClassName("kote-food__msg-btn")[0].addEventListener("touchend",function(t){handler(t,e)})}}})}window.onload=init;